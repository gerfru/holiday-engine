<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç Travel Comparison Platform</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .hero {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .search-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: -50px auto 40px;
            max-width: 800px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .city-input {
            position: relative;
        }
        
        .city-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e9ecef;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }
        
        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f1f2f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .suggestion-item:hover {
            background: #f8f9fa;
        }
        
        .suggestion-city {
            font-weight: 600;
            color: #333;
        }
        
        .suggestion-iata {
            font-size: 0.85rem;
            color: #666;
            background: #e9ecef;
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .search-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 18px;
            padding: 18px;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .search-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .city-status {
            margin-top: 5px;
            font-size: 0.85rem;
            color: #28a745;
        }
        
        .city-status.error {
            color: #dc3545;
        }
        
        .city-status.warning {
            color: #ffc107;
        }
        
        .popular-destinations {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .popular-destinations h4 {
            margin-top: 0;
            color: #555;
        }
        
        .dest-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .dest-item {
            padding: 8px 12px;
            background: white;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #e9ecef;
            font-size: 0.9rem;
        }
        
        .dest-item:hover {
            background: #667eea;
            color: white;
            transform: translateY(-1px);
        }
        
        .features {
            background: white;
            padding: 60px 20px;
            text-align: center;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 40px auto 0;
        }
        
        .feature {
            padding: 30px 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .search-card {
                margin: -30px 20px 20px;
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>üåç Travel Comparison</h1>
        <p>Einfach St√§dtenamen eingeben - wir finden die besten Flug + Hotel Kombinationen</p>
    </div>

    <div class="search-card">
        <form action="/smart-search" method="post" id="search-form">
            <div class="form-section">
                <h3>üß† Smart Travel Search</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="origin">üõ´ Von</label>
                        <div class="city-input">
                            <input name="origin" id="origin" type="text" 
                                   placeholder="z.B. Wien, M√ºnchen, London..." 
                                   autocomplete="off" required>
                            <div class="city-suggestions" id="origin-suggestions"></div>
                        </div>
                        <div class="city-status" id="origin-status"></div>
                    </div>
                    <div class="form-group">
                        <label for="destination">üéØ Nach</label>
                        <div class="city-input">
                            <input name="destination" id="destination" type="text" 
                                   placeholder="z.B. Barcelona, Rom, Paris..." 
                                   autocomplete="off" required>
                            <div class="city-suggestions" id="destination-suggestions"></div>
                        </div>
                        <div class="city-status" id="destination-status"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="departure">üìÖ Abreise</label>
                        <input name="departure" type="date" required>
                    </div>
                    <div class="form-group">
                        <label for="return_date">üìÖ R√ºckkehr</label>
                        <input name="return_date" type="date" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="budget">üí∞ Budget (optional)</label>
                        <input name="budget" type="number" placeholder="z.B. 600" min="100" step="50">
                    </div>
                    <div class="form-group">
                        <label for="persons">üë• Personen</label>
                        <select name="persons">
                            <option value="1">1 Person</option>
                            <option value="2" selected>2 Personen</option>
                            <option value="3">3 Personen</option>
                            <option value="4">4 Personen</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="search-btn" id="search-btn">
                    üîç Beste Kombinationen finden
                </button>
            </div>
        </form>
        
        <div class="popular-destinations">
            <h4>üî• Beliebte Reiseziele</h4>
            <div class="dest-grid">
                <div class="dest-item" onclick="setDestination('Wien', 'VIE')">Wien üá¶üáπ</div>
                <div class="dest-item" onclick="setDestination('Graz', 'GRZ')">Graz üá¶üáπ</div>
                <div class="dest-item" onclick="setDestination('Salzburg', 'SZG')">Salzburg üá¶üáπ</div>
                <div class="dest-item" onclick="setDestination('M√ºnchen', 'MUC')">M√ºnchen üá©üá™</div>
                <div class="dest-item" onclick="setDestination('Berlin', 'BER')">Berlin üá©üá™</div>
                <div class="dest-item" onclick="setDestination('Barcelona', 'BCN')">Barcelona üá™üá∏</div>
                <div class="dest-item" onclick="setDestination('Rom', 'FCO')">Rom üáÆüáπ</div>
                <div class="dest-item" onclick="setDestination('Paris', 'CDG')">Paris üá´üá∑</div>
                <div class="dest-item" onclick="setDestination('London', 'LHR')">London üá¨üáß</div>
                <div class="dest-item" onclick="setDestination('Amsterdam', 'AMS')">Amsterdam üá≥üá±</div>
                <div class="dest-item" onclick="setDestination('Madrid', 'MAD')">Madrid üá™üá∏</div>
                <div class="dest-item" onclick="setDestination('Mallorca', 'PMI')">Mallorca üá™üá∏</div>
                <div class="dest-item" onclick="setDestination('Ibiza', 'IBZ')">Ibiza üá™üá∏</div>
                <div class="dest-item" onclick="setDestination('Nice', 'NCE')">Nice üá´üá∑</div>
                <div class="dest-item" onclick="setDestination('Santorini', 'JTR')">Santorini üá¨üá∑</div>
                <div class="dest-item" onclick="setDestination('Istanbul', 'IST')">Istanbul üáπüá∑</div>
                <div class="dest-item" onclick="setDestination('New York', 'JFK')">New York üá∫üá∏</div>
                <div class="dest-item" onclick="setDestination('Las Vegas', 'LAS')">Las Vegas üá∫üá∏</div>
                <div class="dest-item" onclick="setDestination('Miami', 'MIA')">Miami üá∫üá∏</div>
                <div class="dest-item" onclick="setDestination('Tokyo', 'NRT')">Tokyo üáØüáµ</div>
                <div class="dest-item" onclick="setDestination('Bangkok', 'BKK')">Bangkok üáπüá≠</div>
                <div class="dest-item" onclick="setDestination('Singapore', 'SIN')">Singapore üá∏üá¨</div>
                <div class="dest-item" onclick="setDestination('Bali', 'DPS')">Bali üáÆüá©</div>
                <div class="dest-item" onclick="setDestination('Dubai', 'DXB')">Dubai üá¶üá™</div>
                <div class="dest-item" onclick="setDestination('Sydney', 'SYD')">Sydney üá¶üá∫</div>
            </div>
        </div>
    </div>

    <div class="features">
        <h2>üöÄ Smart City Search</h2>
        
        <div class="feature-grid">
            <div class="feature">
                <div class="feature-icon">üß†</div>
                <h3>Intelligente Erkennung</h3>
                <p>Gibt einfach "Wien" oder "Barcelona" ein - wir erkennen automatisch die richtigen Flugh√§fen</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">üîç</div>
                <h3>Auto-Vervollst√§ndigung</h3>
                <p>W√§hrend du tippst, schlagen wir passende St√§dte vor mit IATA-Codes</p>
            </div>
            
            <div class="feature">
                <div class="feature-icon">‚ö°</div>
                <h3>Sofort-Suche</h3>
                <p>Keine Dropdown-Men√ºs - einfach tippen und direkt die besten Deals finden</p>
            </div>
        </div>
    </div>

    <script>
        // Stadt-zu-IATA Mapping (Client-seitig f√ºr schnelle Suche)
        const CITY_MAP = {
            // √ñsterreich
            'wien': 'VIE', 'vienna': 'VIE',
            'graz': 'GRZ', 'salzburg': 'SZG', 'linz': 'LNZ', 'innsbruck': 'INN', 'klagenfurt': 'KLU',
            
            // Deutschland
            'm√ºnchen': 'MUC', 'munich': 'MUC', 'berlin': 'BER', 'hamburg': 'HAM',
            'd√ºsseldorf': 'DUS', 'frankfurt': 'FRA', 'stuttgart': 'STR',
            'k√∂ln': 'CGN', 'cologne': 'CGN', 'hannover': 'HAJ', 'n√ºrnberg': 'NUE',
            'nuremberg': 'NUE', 'leipzig': 'LEJ', 'dresden': 'DRS', 'bremen': 'BRE',
            
            // Europa - Spanien & Portugal
            'barcelona': 'BCN', 'madrid': 'MAD', 'valencia': 'VLC', 'seville': 'SVQ',
            'sevilla': 'SVQ', 'bilbao': 'BIO', 'mallorca': 'PMI', 'palma': 'PMI',
            'ibiza': 'IBZ', 'lisboa': 'LIS', 'lisbon': 'LIS', 'porto': 'OPO',
            
            // Europa - Italien
            'rom': 'FCO', 'rome': 'FCO', 'milano': 'MXP', 'milan': 'MXP', 'mailand': 'MXP',
            'venedig': 'VCE', 'venice': 'VCE', 'florenz': 'FLR', 'florence': 'FLR',
            'naples': 'NAP', 'neapel': 'NAP', 'turin': 'TRN', 'bologna': 'BLQ',
            'catania': 'CTA', 'palermo': 'PMO', 'bari': 'BRI',
            
            // Europa - Frankreich
            'paris': 'CDG', 'nice': 'NCE', 'nizza': 'NCE', 'lyon': 'LYS',
            'marseille': 'MRS', 'toulouse': 'TLS', 'bordeaux': 'BOD', 'strasbourg': 'SXB',
            
            // Europa - UK & Ireland
            'london': 'LHR', 'edinburgh': 'EDI', 'glasgow': 'GLA', 'manchester': 'MAN',
            'birmingham': 'BHX', 'dublin': 'DUB', 'cork': 'ORK',
            
            // Europa - Benelux & Schweiz
            'amsterdam': 'AMS', 'brussels': 'BRU', 'br√ºssel': 'BRU', 'antwerp': 'ANR',
            'geneva': 'GVA', 'genf': 'GVA', 'zurich': 'ZUR', 'z√ºrich': 'ZUR',
            'basel': 'BSL', 'bern': 'BRN',
            
            // Europa - Nordisch
            'stockholm': 'ARN', 'oslo': 'OSL', 'kopenhagen': 'CPH', 'copenhagen': 'CPH',
            'helsinki': 'HEL', 'reykjavik': 'KEF',
            
            // Europa - Osteuropa
            'prag': 'PRG', 'prague': 'PRG', 'budapest': 'BUD', 'warsaw': 'WAW',
            'warschau': 'WAW', 'krakow': 'KRK', 'krakau': 'KRK', 'bucharest': 'OTP',
            'bukarest': 'OTP', 'belgrade': 'BEG', 'belgrad': 'BEG', 'zagreb': 'ZAG',
            'split': 'SPU', 'dubrovnik': 'DBV', 'ljubljana': 'LJU', 'bratislava': 'BTS',
            'riga': 'RIX', 'tallinn': 'TLL', 'vilnius': 'VNO', 'moscow': 'SVO',
            'moskau': 'SVO', 'st petersburg': 'LED', 'kiev': 'KBP', 'kyiv': 'KBP',
            'minsk': 'MSQ', 'sofia': 'SOF',
            
            // Europa - Griechenland & T√ºrkei
            'athen': 'ATH', 'athens': 'ATH', 'thessaloniki': 'SKG', 'santorini': 'JTR',
            'mykonos': 'JMK', 'rhodes': 'RHO', 'crete': 'HER', 'corfu': 'CFU',
            'istanbul': 'IST', 'cyprus': 'LCA',
            
            // USA
            'new york': 'JFK', 'nyc': 'JFK', 'los angeles': 'LAX', 'la': 'LAX',
            'chicago': 'ORD', 'miami': 'MIA', 'san francisco': 'SFO', 'sf': 'SFO',
            'las vegas': 'LAS', 'vegas': 'LAS', 'seattle': 'SEA', 'boston': 'BOS',
            'washington': 'DCA', 'dc': 'DCA', 'philadelphia': 'PHL', 'atlanta': 'ATL',
            'denver': 'DEN', 'phoenix': 'PHX', 'dallas': 'DFW', 'houston': 'IAH',
            'orlando': 'MCO', 'tampa': 'TPA', 'detroit': 'DTW', 'minneapolis': 'MSP',
            'portland': 'PDX', 'san diego': 'SAN', 'salt lake city': 'SLC',
            
            // Kanada
            'toronto': 'YYZ', 'vancouver': 'YVR', 'montreal': 'YUL', 'calgary': 'YYC',
            
            // Asien - Japan & Korea
            'tokyo': 'NRT', 'osaka': 'KIX', 'kyoto': 'KIX', 'seoul': 'ICN', 'busan': 'PUS',
            
            // Asien - China & Hong Kong
            'beijing': 'PEK', 'peking': 'PEK', 'shanghai': 'PVG', 'guangzhou': 'CAN',
            'hong kong': 'HKG', 'hongkong': 'HKG', 'taipei': 'TPE',
            
            // Asien - S√ºdostasien
            'bangkok': 'BKK', 'phuket': 'HKT', 'singapore': 'SIN', 'singapur': 'SIN',
            'kuala lumpur': 'KUL', 'jakarta': 'CGK', 'bali': 'DPS', 'denpasar': 'DPS',
            'manila': 'MNL', 'ho chi minh': 'SGN', 'saigon': 'SGN', 'hanoi': 'HAN',
            
            // Asien - Indien
            'mumbai': 'BOM', 'bombay': 'BOM', 'delhi': 'DEL', 'new delhi': 'DEL',
            'bangalore': 'BLR', 'chennai': 'MAA', 'kolkata': 'CCU', 'goa': 'GOI',
            
            // Middle East
            'dubai': 'DXB', 'abu dhabi': 'AUH', 'doha': 'DOH', 'kuwait': 'KWI',
            'riyadh': 'RUH', 'jeddah': 'JED', 'tel aviv': 'TLV', 'beirut': 'BEY',
            'amman': 'AMM', 'tehran': 'IKA', 'teheran': 'IKA',
            
            // Afrika
            'cairo': 'CAI', 'kairo': 'CAI', 'casablanca': 'CMN', 'marrakech': 'RAK',
            'cape town': 'CPT', 'kapstadt': 'CPT', 'johannesburg': 'JNB',
            
            // Ozeanien
            'sydney': 'SYD', 'melbourne': 'MEL', 'brisbane': 'BNE', 'perth': 'PER',
            'auckland': 'AKL', 'wellington': 'WLG', 'christchurch': 'CHC',
            
            // Aliases
            'muenchen': 'MUC', 'duesseldorf': 'DUS', 'koeln': 'CGN',
            'ny': 'JFK', 'lon': 'LHR', 'par': 'CDG'
        };

        // Set default dates
        const today = new Date();
        const departure = new Date(today);
        departure.setDate(today.getDate() + 30);
        const returnDate = new Date(departure);
        returnDate.setDate(departure.getDate() + 3);

        document.querySelector('input[name="departure"]').value = departure.toISOString().split('T')[0];
        document.querySelector('input[name="return_date"]').value = returnDate.toISOString().split('T')[0];

        // Set minimum dates
        document.querySelectorAll('input[type="date"]').forEach(input => {
            input.min = today.toISOString().split('T')[0];
        });

        // City input handlers
        let activeField = null;

        function setupCityInput(inputId) {
            const input = document.getElementById(inputId);
            const suggestions = document.getElementById(inputId + '-suggestions');
            const status = document.getElementById(inputId + '-status');

            input.addEventListener('input', function() {
                const value = this.value.trim().toLowerCase();
                
                if (value.length < 2) {
                    suggestions.style.display = 'none';
                    status.textContent = '';
                    return;
                }

                // Find matches
                const matches = findCityMatches(value);
                
                if (matches.length > 0) {
                    showSuggestions(suggestions, matches, inputId);
                    
                    // Check for exact match
                    const exactMatch = matches.find(m => m.city.toLowerCase() === value);
                    if (exactMatch) {
                        status.textContent = `‚úì ${exactMatch.city} (${exactMatch.iata})`;
                        status.className = 'city-status';
                    } else {
                        status.textContent = `Tippe weiter f√ºr Vorschl√§ge...`;
                        status.className = 'city-status warning';
                    }
                } else {
                    suggestions.style.display = 'none';
                    status.textContent = `üîç Wir suchen automatisch nach diesem Ort`;
                    status.className = 'city-status warning';
                }
            });

            input.addEventListener('blur', function() {
                // Delay hiding to allow click on suggestion
                setTimeout(() => {
                    suggestions.style.display = 'none';
                }, 200);
            });

            input.addEventListener('focus', function() {
                activeField = inputId;
                if (this.value.length >= 2) {
                    const matches = findCityMatches(this.value.toLowerCase());
                    if (matches.length > 0) {
                        showSuggestions(suggestions, matches, inputId);
                    }
                }
            });
        }

        function findCityMatches(query) {
            const matches = [];
            
            for (const [city, iata] of Object.entries(CITY_MAP)) {
                if (city.includes(query) || query.includes(city)) {
                    const score = city.startsWith(query) ? 1 : 0.5;
                    matches.push({
                        city: city.charAt(0).toUpperCase() + city.slice(1),
                        iata: iata,
                        score: score
                    });
                }
            }
            
            // Sort by relevance
            matches.sort((a, b) => b.score - a.score);
            return matches.slice(0, 5); // Top 5
        }

        function showSuggestions(container, matches, inputId) {
            container.innerHTML = '';
            
            matches.forEach(match => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.innerHTML = `
                    <span class="suggestion-city">${match.city}</span>
                    <span class="suggestion-iata">${match.iata}</span>
                `;
                
                item.addEventListener('click', () => {
                    selectCity(inputId, match.city, match.iata);
                });
                
                container.appendChild(item);
            });
            
            container.style.display = 'block';
        }

        function selectCity(inputId, city, iata) {
            const input = document.getElementById(inputId);
            const suggestions = document.getElementById(inputId + '-suggestions');
            const status = document.getElementById(inputId + '-status');
            
            input.value = city;
            suggestions.style.display = 'none';
            status.textContent = `‚úì ${city} (${iata})`;
            status.className = 'city-status';
            
            // Store IATA code as data attribute for form submission
            input.setAttribute('data-iata', iata);
        }

        function setDestination(city, iata) {
            // Set destination field when clicking popular destinations
            if (activeField === 'origin') {
                selectCity('origin', city, iata);
            } else {
                selectCity('destination', city, iata);
                activeField = 'destination';
            }
        }

        // Setup both city inputs
        setupCityInput('origin');
        setupCityInput('destination');

        // Form submission handler
        document.getElementById('search-form').addEventListener('submit', function(e) {
            const originInput = document.getElementById('origin');
            const destInput = document.getElementById('destination');
            
            // Basic validation - just check if fields are not empty
            const originValue = originInput.value.trim();
            const destValue = destInput.value.trim();
            
            if (!originValue || !destValue) {
                e.preventDefault();
                alert('Bitte gib Start- und Zielort ein');
                return false;
            }
            
            // Show loading state
            const submitBtn = document.getElementById('search-btn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'üîç Suche l√§uft...';
        });

        // Popular destination click handler
        document.querySelectorAll('.dest-item').forEach(item => {
            item.addEventListener('click', function() {
                const text = this.textContent.trim();
                const city = text.split(' ')[0]; // Extract city name before flag
                
                // Find IATA code
                const cityLower = city.toLowerCase();
                let iata = '';
                
                // Special cases for display names vs. internal names
                const displayToInternal = {
                    'wien': 'wien',
                    'rom': 'rom', 
                    'm√ºnchen': 'm√ºnchen'
                };
                
                const internalCity = displayToInternal[cityLower] || cityLower;
                iata = CITY_MAP[internalCity] || '';
                
                if (iata) {
                    // Determine which field to fill
                    const originInput = document.getElementById('origin');
                    const destInput = document.getElementById('destination');
                    
                    if (!originInput.value) {
                        selectCity('origin', city, iata);
                        destInput.focus();
                    } else if (!destInput.value) {
                        selectCity('destination', city, iata);
                    } else {
                        // Both filled, replace destination
                        selectCity('destination', city, iata);
                    }
                }
            });
        });

        // Keyboard navigation for suggestions
        document.addEventListener('keydown', function(e) {
            if (activeField) {
                const suggestions = document.getElementById(activeField + '-suggestions');
                if (suggestions.style.display === 'block') {
                    const items = suggestions.querySelectorAll('.suggestion-item');
                    // Add keyboard navigation here if needed
                }
            }
        });
    </script>
</body>
</html>